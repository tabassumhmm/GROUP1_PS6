<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trade Management Team UI</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f4f6f9;
}

/* NAVBAR */
.navbar {
    display: flex;
    background: #2c3e50;
    padding: 15px;
    color: white;
}
.navbar a {
    color: white;
    text-decoration: none;
    margin-right: 25px;
    font-size: 18px;
    cursor: pointer;
}
.navbar a:hover { color: #f1c40f; }

/* SECTION */
.section {
    display: none;
    padding: 20px;
}
.active { display: block; }

/* TABLE */
table {
    width: 100%;
    border-collapse: collapse;
    background: white;
}
th, td {
    border: 1px solid #ddd;
    padding: 10px;
}
th {
    background: #2980b9;
    color: white;
}

/* BUTTONS */
.btn {
    padding: 8px 12px;
    border: none;
    cursor: pointer;
    margin: 3px;
    border-radius: 4px;
    font-size: 14px;
}
.add-btn { background: #27ae60; color: white; }
.edit-btn { background: #f39c12; color: white; }
.delete-btn { background: #c0392b; color: white; }
.search-box {
    padding: 8px;
    width: 250px;
    margin-bottom: 10px;
}

/* -------- SMALL CHARTS -------- */
.chart-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}
.chart-box {
    background: white;
    padding: 15px;
    border-radius: 10px;
}
canvas {
    width: 100% !important;
    height: 180px !important;
}

</style>
</head>
<body>

<!-- NAVBAR -->
<div class="navbar">
    <a onclick="showSection('home')">Home</a>
    <a onclick="showSection('requests')">Investor Requests</a>
    <a onclick="showSection('trades')">Manage Trades</a>
    <a onclick="logout()">Logout</a>
</div>

<!-- HOME PAGE WITH SMALL GRAPHS -->
<div id="home" class="section active">
    <h2>Dashboard | Trade Management Team</h2>

    <div class="chart-grid">
        <div class="chart-box">
            <h4>Monthly Trade Volume</h4>
            <canvas id="tradeVolumeChart"></canvas>
        </div>

        <div class="chart-box">
            <h4>Buyer vs Seller</h4>
            <canvas id="buyerSellerChart"></canvas>
        </div>

        <div class="chart-box">
            <h4>Request Status</h4>
            <canvas id="requestStatusChart"></canvas>
        </div>
    </div>
</div>

<!-- INVESTOR REQUESTS -->
<div id="requests" class="section">
    <h2>Investor Trade Requests</h2>

    <input type="text" id="searchRequest" class="search-box" placeholder="Search requests..." onkeyup="searchRequests()">
    <button class="btn add-btn" onclick="addRequest()">Add Request</button>

    <table id="requestTable">
        <thead>
            <tr>
                <th>Investor ID</th>
                <th>Trade Amount</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>INV-001</td>
                <td>$50,000</td>
                <td>2025-01-05</td>
                <td>Pending</td>
                <td>
                    <button class="btn edit-btn" onclick="editRow(this)">Edit</button>
                    <button class="btn delete-btn" onclick="deleteRow(this)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- MANAGE TRADES -->
<div id="trades" class="section">
    <h2>All Trades Between Institutions</h2>

    <input type="text" id="searchTrade" class="search-box" placeholder="Search trades..." onkeyup="searchTrades()">
    <button class="btn add-btn" onclick="addTrade()">Add Trade</button>

    <table id="tradeTable">
        <thead>
            <tr>
                <th>Buyer</th>
                <th>Seller</th>
                <th>Amount</th>
                <th>Trade Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Institution A</td>
                <td>Institution B</td>
                <td>$120,000</td>
                <td>2025-01-10</td>
                <td>
                    <button class="btn edit-btn" onclick="editRow(this)">Edit</button>
                    <button class="btn delete-btn" onclick="deleteRow(this)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<script>

/* SECTION SWITCH */
function showSection(id) {
    document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

/* LOGOUT */
function logout() {
    alert("You have been logged out!");
}

/* ADD REQUEST */
function addRequest() {
    let investor = prompt("Enter Investor ID:");
    let amount = prompt("Enter Trade Amount:");
    let date = prompt("Enter Date (YYYY-MM-DD):");

    if (!investor || !amount || !date) return;

    let table = document.getElementById("requestTable").getElementsByTagName('tbody')[0];
    let row = table.insertRow();

    row.innerHTML = `
        <td>${investor}</td>
        <td>${amount}</td>
        <td>${date}</td>
        <td>Pending</td>
        <td>
            <button class="btn edit-btn" onclick="editRow(this)">Edit</button>
            <button class="btn delete-btn" onclick="deleteRow(this)">Delete</button>
        </td>`;
}

/* ADD TRADE */
function addTrade() {
    let buyer = prompt("Enter Buyer:");
    let seller = prompt("Enter Seller:");
    let amount = prompt("Enter Trade Amount:");
    let date = prompt("Enter Trade Date (YYYY-MM-DD):");

    if (!buyer || !seller || !amount || !date) return;

    let table = document.getElementById("tradeTable").getElementsByTagName('tbody')[0];
    let row = table.insertRow();

    row.innerHTML = `
        <td>${buyer}</td>
        <td>${seller}</td>
        <td>${amount}</td>
        <td>${date}</td>
        <td>
            <button class="btn edit-btn" onclick="editRow(this)">Edit</button>
            <button class="btn delete-btn" onclick="deleteRow(this)">Delete</button>
        </td>`;
}

/* EDIT ROW */
function editRow(btn) {
    let row = btn.parentNode.parentNode;
    for (let i = 0; i < row.cells.length - 1; i++) {
        let val = prompt("Edit value:", row.cells[i].innerHTML);
        if (val !== null) row.cells[i].innerHTML = val;
    }
}

/* DELETE ROW */
function deleteRow(btn) {
    if (confirm("Are you sure you want to delete this entry?")) {
        btn.parentNode.parentNode.remove();
    }
}

/* SEARCH REQUESTS */
function searchRequests() {
    let input = document.getElementById("searchRequest").value.toLowerCase();
    let rows = document.querySelectorAll("#requestTable tbody tr");

    rows.forEach(r => {
        r.style.display = r.textContent.toLowerCase().includes(input) ? "" : "none";
    });
}

/* SEARCH TRADES */
function searchTrades() {
    let input = document.getElementById("searchTrade").value.toLowerCase();
    let rows = document.querySelectorAll("#tradeTable tbody tr");

    rows.forEach(r => {
        r.style.display = r.textContent.toLowerCase().includes(input) ? "" : "none";
    });
}

/* ========== SMALL DASHBOARD CHARTS ========== */
document.addEventListener("DOMContentLoaded", function () {

    /* Monthly Trade Volume */
    new Chart(document.getElementById('tradeVolumeChart'), {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Volume ($)',
                data: [50000, 68000, 90000, 120000, 140000, 155000],
                borderWidth: 2,
                fill: false
            }]
        }
    });

    /* Buyer vs Seller Comparison */
    new Chart(document.getElementById('buyerSellerChart'), {
        type: 'bar',
        data: {
            labels: ['Buyer', 'Seller'],
            datasets: [{
                label: 'Trade Amount ($)',
                data: [300000, 280000],
                borderWidth: 1
            }]
        }
    });

    /* Request Status */
    new Chart(document.getElementById('requestStatusChart'), {
        type: 'doughnut',
        data: {
            labels: ['Pending', 'Approved', 'Rejected'],
            datasets: [{
                data: [40, 45, 15],
                borderWidth: 1
            }]
        }
    });

});
</script>

</body>
</html>
